<section class="login-register">
  <div id="container" class="wrapper">
    <div *ngIf="!changed; else changePasswordTemplate">
      <div class="title">
        <span class="login">Create a new password.</span>
      </div>
      <form class="form" [formGroup]="form" (ngSubmit)="setNewPassword()" autocomplete="off">
        <div class="form-group">
          <label for="newPassword">Create New password</label>
          <div class="input-group password-input-group">
            <img src="assets/lock.svg" alt="password">
            <input #focusField [type]="showNewPassword ? 'text' : 'password'" id="newPassword"
              formControlName="newPassword" placeholder="New Password" />
            <i class="fa" [ngClass]="{'fa-eye-slash': !showNewPassword,'fa-eye': showNewPassword}"
              (click)="toggleNewPasswordType()"></i>
          </div>

          <app-control-messages [control]="form.controls['newPassword']" [showRequiredErrors]="showRequiredErrors">
          </app-control-messages>
        </div>
        <div class="form-group">
          <label for="confirmPassword">Confirm New Password</label>
          <div class="input-group password-input-group">
            <img src="assets/lock.svg" alt="password">
            <input [type]="showConfirmPassword ? 'text' : 'password'" id="confirmPassword"
              formControlName="confirmPassword" placeholder="Confirm Password" />
            <i class="fa" [ngClass]="{'fa-eye-slash': !showConfirmPassword,'fa-eye': showConfirmPassword}"
              (click)="toggleConfirmPasswordType()"></i>
          </div>

          <app-control-messages [control]="form.controls['confirmPassword']" [showRequiredErrors]="showRequiredErrors">
          </app-control-messages>
          <span *ngIf="error" class="error">{{ error.message }}</span>
        </div>
        <div>
          <button class="submit" type="submit">Create Password</button>
        </div>
      </form>
    </div>
  </div>
</section>

<ng-template #changePasswordTemplate>
  <div class="title">
    <span class="login">Password updated. </span>
    <span id="reset-password-note" [ngStyle]="{'line-height':'25px'}">You can return to login with your new
      credentials.</span>
  </div>

  <div class="form">
    <button class="submit" type="button" routerLink="/login">Log in</button>
  </div>
</ng-template>
